<div class="container-fluid px-5 pt-5">
  <div class="row">
    <div class="col-auto col-3" *ngFor="let item of [].constructor(4); let i = index">
      <ng-container *ngIf="isPlayer(i) === true; else robotTemplate">
        <div class="card">
          <img class="card-img-top" src="https://api.dicebear.com/5.x/fun-emoji/svg?seed={{boards[i].Player.username}}">
          <div class="card-body">
            <h5 class="card-title">
              <ng-container *ngIf="i == 0">
                <i class="text-warning fa-solid fa-crown"></i>
              </ng-container>
              {{ boards[i].Player.username }}
            </h5>
            <p *ngIf="boards[i].Player.id == board.PlayerId" class="text-success card-text">Vous</p>
          </div>
          <div class="card-footer">
            <button (click)='!loading && changeReadyState($event)' [ngClass]="[boards[i].Player.id !== board.PlayerId ? 'disabled' : '',  boards[i].isReady ? 'btn-success' : 'btn-danger']" class="btn w-100">
              <div *ngIf="loading" class="d-inline-block"><i class="fas fa-spinner fa-spin"></i>&nbsp;</div>
                <ng-container *ngIf="boards[i].isReady; else notReadyTemplate">Prêt</ng-container>
                <ng-template #notReadyTemplate>Pas prêt</ng-template>
            </button>
          </div>
        </div>
      </ng-container>
      <ng-template #robotTemplate>
        <div class="card card-waiting">
          <img class="card-img-top" src="https://api.dicebear.com/5.x/bottts-neutral/svg?seed=MonRobot{{i}}">
          <div class="card-body">
            <h5 class="card-title">Joueur {{ i + 1 }}</h5>
            <p class="card-text fst-italic text-secondary">En attente</p>
          </div>
          <div class="card-footer">
            <button class="btn btn-success w-100 disabled">Prêt</button>
          </div>
        </div>
      </ng-template>
    </div>
  </div>
  <div class="row mt-4 justify-content-center">
    <div class="col-3">
      <button class="button-19 w-100">Copier le code ({{game.code}})</button>
    </div>
    <div class="col-3">
      <button class="button-19 w-100">Rejoindre une partie</button>
    </div>
  </div>
</div>
